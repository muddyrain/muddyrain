"use strict";(self.webpackChunkmuddyrain=self.webpackChunkmuddyrain||[]).push([[626],{85626:function(ct,q,K){K.d(q,{Z:function(){return at}});var W=K(5574),O=K.n(W),N=K(67294),V="data:image/png;base64,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",v={container:"I7PMjbK0NYSNpwu4ngUG",tail_area:"zDmKS7yolm8hZc9ktAI5",drag_crop:"mShkcjZApCcC2rYW2XPB",drag_crop_side:"S3jJJrKXRNEZRuf4eBAl",drag_crop_side_top:"_luRcGxnbpwyFqNAxA5c",drag_crop_side_bottom:"IDuUIRAEXa8VYJQxCN37",drag_crop_side_left:"cxd3z3eL3e0hh3AdA3u9",drag_crop_side_right:"AIohy8ws9_QlcDHHBfKu",drag_crop_point:"KfN_9fdz8mJj244fXw3U",drag_crop_point_tl:"Q1BQzqliCDYH5E81F_DZ",drag_crop_point_tr:"C7MJjABdkIYI9BSYSRxD",drag_crop_point_bl:"bfBBzr3AvHodbhkXxkkx",drag_crop_point_br:"_5U1I16wGQQrqA2xw0QT",image_container:"iAtzgdDgvwQhz_f6BPaS",tail_result:"sgJZqI5ZtZQSAfDx4t70",tail_result_img:"BDqfl7ZTkE036YBm8LJT",tail_result_text:"e4GteOI2T2Aq5fQfgWMw",tail_result_link:"q63LAKEg5nkO9Y0ay3sZ"},L=function(n){return n.tl="tl",n.tr="tr",n.bl="bl",n.br="br",n}({}),U=function(n){return n.top="top",n.bottom="bottom",n.left="left",n.right="right",n}({}),$=function(r,t,T,H){r.addEventListener("mousedown",function(S){S.stopPropagation();var k=S.clientX,m=S.clientY,d=parseInt(t.style.left)||0,p=parseInt(t.style.top)||0,D=t.getBoundingClientRect(),c=D.width,l=D.height,j=T.getBoundingClientRect(),C=j.top,w=j.left,E=j.width,R=j.height;document.onmousemove=function(e){var a=e.clientX-k,A=e.clientY-m;switch(r.role){case L.br:{e.clientX-w<E?t.style.width=c+a+"px":t.style.width=E-d+"px",e.clientY-C<R?t.style.height=l+A+"px":t.style.height=R-p+"px";break}case L.bl:{e.y-C<R?t.style.height=l+A+"px":t.style.height=R-p+"px",d+a>0?(d+a<e.x-w+c-a&&(t.style.left=d+a+"px"),c-a<T.width&&(t.style.width=c-a+"px")):(t.style.left="0px",t.style.width=e.x-w+c-a+"px");break}case L.tl:{e.clientX<=c+k&&(d+a>=0?(t.style.width=c-a+"px",t.style.left=d+a+"px"):(t.style.left="0px",t.style.width=e.x-w+c-a+"px")),e.clientY<=l+m&&(p+A>=0?(t.style.height=l-A+"px",t.style.top=p+A+"px"):(t.style.top="0px",t.style.height=e.y-C+l-A+"px"));break}case L.tr:{e.x-w<E?t.style.width=c+a+"px":t.style.width=E-d+"px",e.clientY<=l+m&&(p+A>=0?(t.style.height=l-A+"px",t.style.top=p+A+"px"):(t.style.top="0px",t.style.height=e.y-C+l-A+"px"));break}case U.top:{e.clientY<=l+m&&(p+A>=0?(t.style.height=l-A+"px",t.style.top=p+A+"px"):(t.style.top="0px",t.style.height=e.clientY-C+l-A+"px"));break}case U.bottom:{e.clientY<C+R?t.style.height=l+A+"px":t.style.height=R-p+"px";break}case U.right:{e.clientX<w+E?t.style.width=c+a+"px":t.style.width=E-d+"px";break}case U.left:{e.clientX<=c+k&&(d+a>=0?(t.style.width=c-a+"px",t.style.left=d+a+"px"):(t.style.left="0px",t.style.width=e.clientX-w+c-a+"px"));break}default:break}},r.addEventListener("mouseup",function(){document.onmousemove=null,H==null||H()})})};function tt(n){var r=new Option().style;return r.color=n,r.color===n.toLowerCase()}function et(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=n;if(t.slice(0,1)!=="#")throw"The starting character must be #";if(t.length===3&&(t+="000"),tt(t))throw"".concat(t," is not a hex color.");return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+r+")"}var u=K(85893),it=function(r){var t=r.src,T=r.filename,H=T===void 0?"\u4E0B\u8F7D":T,S=r.onFinish,k=r.isShowDownload,m=k===void 0?!0:k,d=r.isShowReview,p=d===void 0?!0:d,D=r.areaColor,c=D===void 0?"#f00000":D,l=r.sideColor,j=l===void 0?"transparent":l,C=r.areaAlpha,w=C===void 0?.25:C,E=(0,N.useRef)(null),R=(0,N.useRef)(null),e=(0,N.useRef)(null),a=(0,N.useRef)(null),A=(0,N.useState)(""),_=O()(A,2),M=_[0],P=_[1],X=(0,N.useRef)(new Image),J=(0,N.useRef)({imageScale:1}),nt=function(){P(V)},ot=function(){var i=document.createElement("a");i.download=H+".jpg",i.href=M,i.click()},F=function(i,s,o,g){var B=e.current;if(B){var Q=J.current.canvasCtx;if(Q){var y=Q.getImageData(i,s,o,g),f=document.createElement("canvas");if(f){var x=f.getContext("2d");f.width=y.width,f.height=y.height,x&&(x.putImageData(y,0,0),P(f.toDataURL()),S==null||S(f.toDataURL()))}}}},rt=function(i,s){for(var o=0,g=Array.from(i.children);o<g.length;o++){var B=g[o];$(B,i,s,function(){var Q=s.getBoundingClientRect(),y=Q.left,f=Q.top,x=i.getBoundingClientRect(),Y=x.left,I=x.top;F(Y-y,I-f,i.clientWidth,i.clientHeight)})}},At=function(){return new Promise(function(i,s){var o=e.current,g=a.current;if(o&&g){var B=o.getContext("2d");if(B){J.current.canvasCtx=B;var Q=new Image;Q.src=t;var y=g.getBoundingClientRect(),f=y.width,x=y.height,Y=f/x;Q.onload=function(){var I=Q.width,b=Q.height,Z=I/b;I<=f&&b<=x?J.current.imageScale=1:Z>Y?J.current.imageScale=f/I:J.current.imageScale=x/b;var z=J.current.imageScale*I,G=J.current.imageScale*b;o.width=z,o.height=G,B.drawImage(Q,0,0,z,G),i(void 0)},Q.onerror=function(I){s(I)}}}})},st=function(i,s){var o=0,g=0;i.addEventListener("mousedown",function(B){B.stopPropagation();var Q=B.pageX,y=B.pageY,f=i.offsetLeft,x=i.offsetTop;document.onmousemove=function(Y){o=Y.pageY-y+x,g=Y.pageX-Q+f;var I=0,b=0,Z=s.clientWidth-i.offsetWidth,z=s.clientHeight-i.offsetHeight;g=g<I?I:g>Z?Z:g,o=o<b?b:o>z?z:o,i.style.left=g+"px",i.style.top=o+"px"},document.onmouseup=function(){F(g,o,i.clientWidth,i.clientHeight),document.onmousemove=null}})};return(0,N.useEffect)(function(){if(E.current&&a.current&&e.current){var h=function(){var s=E.current;X.current.src=t,X.current.setAttribute("crossOrigin","Anonymous"),X.current.onload=function(){F(0,0,(s==null?void 0:s.clientWidth)||0,(s==null?void 0:s.clientHeight)||0)}};At().then(function(){h(),rt(E.current,e.current)}).catch(function(i){throw i}),st(E.current,e.current)}},[]),(0,u.jsxs)("div",{className:v.container,children:[(0,u.jsx)("div",{className:v.tail_area,ref:a,children:(0,u.jsxs)("div",{className:v.image_container,ref:R,children:[(0,u.jsx)("canvas",{ref:e}),(0,u.jsxs)("div",{className:v.drag_crop,ref:E,style:{background:et(c,w)},children:[Object.keys(U).map(function(h){return(0,u.jsx)("div",{role:h,style:{background:j},className:"".concat(v.drag_crop_side," ").concat(v["drag_crop_side_"+h])},h)}),Object.keys(L).map(function(h){return(0,u.jsx)("div",{role:h,className:"".concat(v.drag_crop_point," ").concat(v["drag_crop_point_"+h])},h)})]})]})}),(p||m)&&(0,u.jsxs)("div",{className:v.tail_result,children:[p&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:v.tail_result_img,children:(0,u.jsx)("img",{src:M,alt:"",onError:nt})}),(0,u.jsx)("span",{className:v.tail_result_text,children:"\u9884\u89C8"})]}),m&&(0,u.jsx)("span",{className:v.tail_result_link,onClick:ot,children:"\u4E0B\u8F7D"})]})]})},at=it}}]);
