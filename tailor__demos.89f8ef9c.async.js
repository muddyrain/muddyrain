"use strict";(self.webpackChunkmuddyrain=self.webpackChunkmuddyrain||[]).push([[612],{12852:function(Qt,G,j){j.r(G),j.d(G,{default:function(){return ut}});var tt=j(5574),z=j.n(tt),_=j(42075),W=j(72269),et=j(34198),E=j(67294),at="data:image/png;base64,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",B={container:"I7PMjbK0NYSNpwu4ngUG",tail_area:"zDmKS7yolm8hZc9ktAI5",drag_crop:"mShkcjZApCcC2rYW2XPB",drag_crop_side:"S3jJJrKXRNEZRuf4eBAl",drag_crop_side_top:"_luRcGxnbpwyFqNAxA5c",drag_crop_side_bottom:"IDuUIRAEXa8VYJQxCN37",drag_crop_side_left:"cxd3z3eL3e0hh3AdA3u9",drag_crop_side_right:"AIohy8ws9_QlcDHHBfKu",drag_crop_point:"KfN_9fdz8mJj244fXw3U",drag_crop_point_tl:"Q1BQzqliCDYH5E81F_DZ",drag_crop_point_tr:"C7MJjABdkIYI9BSYSRxD",drag_crop_point_bl:"bfBBzr3AvHodbhkXxkkx",drag_crop_point_br:"_5U1I16wGQQrqA2xw0QT",image_container:"iAtzgdDgvwQhz_f6BPaS",tail_result:"sgJZqI5ZtZQSAfDx4t70",tail_result_img:"BDqfl7ZTkE036YBm8LJT",tail_result_text:"e4GteOI2T2Aq5fQfgWMw",tail_result_link:"q63LAKEg5nkO9Y0ay3sZ"},F=function(s){return s.tl="tl",s.tr="tr",s.bl="bl",s.br="br",s}({}),H=function(s){return s.top="top",s.bottom="bottom",s.left="left",s.right="right",s}({}),it=function(o,t,N,K){o.addEventListener("mousedown",function(J){J.stopPropagation();var k=J.clientX,C=J.clientY,h=parseInt(t.style.left)||0,f=parseInt(t.style.top)||0,b=t.getBoundingClientRect(),r=b.width,c=b.height,Y=N.getBoundingClientRect(),x=Y.top,y=Y.left,Q=Y.width,I=Y.height;document.onmousemove=function(a){var n=a.clientX-k,l=a.clientY-C;switch(o.role){case F.br:{a.clientX-y<Q?t.style.width=r+n+"px":t.style.width=Q-h+"px",a.clientY-x<I?t.style.height=c+l+"px":t.style.height=I-f+"px";break}case F.bl:{a.y-x<I?t.style.height=c+l+"px":t.style.height=I-f+"px",h+n>0?(h+n<a.x-y+r-n&&(t.style.left=h+n+"px"),r-n<N.width&&(t.style.width=r-n+"px")):(t.style.left="0px",t.style.width=a.x-y+r-n+"px");break}case F.tl:{a.clientX<=r+k&&(h+n>=0?(t.style.width=r-n+"px",t.style.left=h+n+"px"):(t.style.left="0px",t.style.width=a.x-y+r-n+"px")),a.clientY<=c+C&&(f+l>=0?(t.style.height=c-l+"px",t.style.top=f+l+"px"):(t.style.top="0px",t.style.height=a.y-x+c-l+"px"));break}case F.tr:{a.x-y<Q?t.style.width=r+n+"px":t.style.width=Q-h+"px",a.clientY<=c+C&&(f+l>=0?(t.style.height=c-l+"px",t.style.top=f+l+"px"):(t.style.top="0px",t.style.height=a.y-x+c-l+"px"));break}case H.top:{a.clientY<=c+C&&(f+l>=0?(t.style.height=c-l+"px",t.style.top=f+l+"px"):(t.style.top="0px",t.style.height=a.clientY-x+c-l+"px"));break}case H.bottom:{a.clientY<x+I?t.style.height=c+l+"px":t.style.height=I-f+"px";break}case H.right:{a.clientX<y+Q?t.style.width=r+n+"px":t.style.width=Q-h+"px";break}case H.left:{a.clientX<=r+k&&(h+n>=0?(t.style.width=r-n+"px",t.style.left=h+n+"px"):(t.style.left="0px",t.style.width=a.clientX-y+r-n+"px"));break}default:break}},o.addEventListener("mouseup",function(){document.onmousemove=null,K==null||K()})})};function nt(s){var o=new Option().style;return o.color=s,o.color===s.toLowerCase()}function st(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=s;if(t.slice(0,1)!=="#")throw"The starting character must be #";if(t.length===3&&(t+="000"),nt(t))throw"".concat(t," is not a hex color.");return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+o+")"}var e=j(85893),ot=function(o){var t=o.src,N=o.filename,K=N===void 0?"\u4E0B\u8F7D":N,J=o.onFinish,k=o.isShowDownload,C=k===void 0?!0:k,h=o.isShowReview,f=h===void 0?!0:h,b=o.areaColor,r=b===void 0?"#f00000":b,c=o.sideColor,Y=c===void 0?"transparent":c,x=o.areaAlpha,y=x===void 0?.25:x,Q=(0,E.useRef)(null),I=(0,E.useRef)(null),a=(0,E.useRef)(null),n=(0,E.useRef)(null),l=(0,E.useState)(""),q=z()(l,2),O=q[0],V=q[1],M=(0,E.useRef)(new Image),D=(0,E.useRef)({imageScale:1}),ht=function(){V(at)},gt=function(){var i=document.createElement("a");i.download=K+".jpg",i.href=O,i.click()},P=function(i,u,A,d){var S=a.current;if(S){var v=D.current.canvasCtx;if(v){var m=v.getImageData(i,u,A,d),p=document.createElement("canvas");if(p){var w=p.getContext("2d");p.width=m.width,p.height=m.height,w&&(w.putImageData(m,0,0),V(p.toDataURL()),J==null||J(p.toDataURL()))}}}},dt=function(i,u){for(var A=0,d=Array.from(i.children);A<d.length;A++){var S=d[A];it(S,i,u,function(){var v=u.getBoundingClientRect(),m=v.left,p=v.top,w=i.getBoundingClientRect(),U=w.left,R=w.top;P(U-m,R-p,i.clientWidth,i.clientHeight)})}},vt=function(){return new Promise(function(i,u){var A=a.current,d=n.current;if(A&&d){var S=A.getContext("2d");if(S){D.current.canvasCtx=S;var v=new Image;v.src=t,v.crossOrigin="*";var m=d.getBoundingClientRect(),p=m.width,w=m.height,U=p/w;v.onload=function(){var R=v.width,L=v.height,Z=R/L;R<=p&&L<=w?D.current.imageScale=1:Z>U?D.current.imageScale=p/R:D.current.imageScale=w/L;var T=D.current.imageScale*R,$=D.current.imageScale*L;A.width=T,A.height=$,S.drawImage(v,0,0,T,$),i(void 0)},v.onerror=function(R){u(R)}}}})},ft=function(i,u){var A=0,d=0;i.addEventListener("mousedown",function(S){S.stopPropagation();var v=S.pageX,m=S.pageY,p=i.offsetLeft,w=i.offsetTop;document.onmousemove=function(U){A=U.pageY-m+w,d=U.pageX-v+p;var R=0,L=0,Z=u.clientWidth-i.offsetWidth,T=u.clientHeight-i.offsetHeight;d=d<R?R:d>Z?Z:d,A=A<L?L:A>T?T:A,i.style.left=d+"px",i.style.top=A+"px"},document.onmouseup=function(){P(d,A,i.clientWidth,i.clientHeight),document.onmousemove=null}})};return(0,E.useEffect)(function(){if(Q.current&&n.current&&a.current){var g=function(){var u=Q.current;M.current.src=t,M.current.setAttribute("crossOrigin","Anonymous"),M.current.onload=function(){P(0,0,(u==null?void 0:u.clientWidth)||0,(u==null?void 0:u.clientHeight)||0)}};vt().then(function(){g(),dt(Q.current,a.current)}).catch(function(i){throw i}),ft(Q.current,a.current)}},[]),(0,e.jsxs)("div",{className:B.container,children:[(0,e.jsx)("div",{className:B.tail_area,ref:n,children:(0,e.jsxs)("div",{className:B.image_container,ref:I,children:[(0,e.jsx)("canvas",{ref:a}),(0,e.jsxs)("div",{className:B.drag_crop,ref:Q,style:{background:st(r,y)},children:[Object.keys(H).map(function(g){return(0,e.jsx)("div",{role:g,style:{background:Y},className:"".concat(B.drag_crop_side," ").concat(B["drag_crop_side_"+g])},g)}),Object.keys(F).map(function(g){return(0,e.jsx)("div",{role:g,className:"".concat(B.drag_crop_point," ").concat(B["drag_crop_point_"+g])},g)})]})]})}),(f||C)&&(0,e.jsxs)("div",{className:B.tail_result,children:[f&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:B.tail_result_img,children:(0,e.jsx)("img",{src:O,alt:"",onError:ht})}),(0,e.jsx)("span",{className:B.tail_result_text,children:"\u9884\u89C8"})]}),C&&(0,e.jsx)("span",{className:B.tail_result_link,onClick:gt,children:"\u4E0B\u8F7D"})]})]})},X=ot,rt="https://muddyrain-oss.oss-cn-hangzhou.aliyuncs.com/package_assets/1.png",At="https://muddyrain-oss.oss-cn-hangzhou.aliyuncs.com/package_assets/2.png",ct="https://muddyrain-oss.oss-cn-hangzhou.aliyuncs.com/package_assets/3.png",lt=function(){var o=E.useState(!0),t=z()(o,2),N=t[0],K=t[1],J=E.useState(!0),k=z()(J,2),C=k[0],h=k[1],f=E.useState("#f00000"),b=z()(f,2),r=b[0],c=b[1],Y=E.useState(.25),x=z()(Y,2),y=x[0],Q=x[1];return(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("h2",{children:"\u5C0F\u4E8E\u5BB9\u5668\u5C3A\u5BF8"}),(0,e.jsxs)(_.Z,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(W.Z,{checked:C,onChange:function(){return h(!C)}}),(0,e.jsx)("span",{children:"\u662F\u5426\u663E\u793A\u9884\u89C8"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(W.Z,{checked:N,onChange:function(){return K(!N)}}),(0,e.jsx)("span",{children:"\u662F\u5426\u663E\u793A\u4E0B\u8F7D"})]}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(et.Z,{value:r,onChange:function(a){c("#"+a.toHex()),Q(a.metaColor.roundA)}}),(0,e.jsx)("span",{children:"\u533A\u57DF\u989C\u8272"})]})]}),(0,e.jsx)(X,{isShowDownload:N,isShowReview:C,areaColor:r,areaAlpha:y,src:rt}),(0,e.jsx)("h2",{children:"\u5927\u4E8E\u5BBD\u5EA6\u5BB9\u5668\u5C3A\u5BF8"}),(0,e.jsx)(X,{src:At}),(0,e.jsx)("h2",{children:"\u5927\u4E8E\u9AD8\u5EA6\u5BB9\u5668\u5C3A\u5BF8"}),(0,e.jsx)(X,{src:ct})]})},ut=lt}}]);
