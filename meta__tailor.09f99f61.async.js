"use strict";(self.webpackChunkmuddyrain=self.webpackChunkmuddyrain||[]).push([[706],{26578:function(C,e,n){n.r(e),n.d(e,{demos:function(){return t}});var m=n(15009),R=n.n(m),r=n(99289),W=n.n(r),o=n(67294),E=n(50361),t={"tailor-demo-demo1":{component:o.memo(o.lazy(function(){return n.e(612).then(n.bind(n,76562))})),asset:{type:"BLOCK",id:"tailor-demo-demo1",refAtomIds:["tailor"],dependencies:{"index.tsx":{type:"FILE",value:n(47313).Z},antd:{type:"NPM",value:"5.19.2"},react:{type:"NPM",value:"18.3.1"},"...tsx":{type:"FILE",value:n(17464).Z},"./utils.ts":{type:"FILE",value:n(64859).Z},"./index.module.less":{type:"FILE",value:n(31255).Z},"./type.ts":{type:"FILE",value:n(76351).Z}},entry:"index.tsx"},context:{antd:n(93989),react:n(67294),"...tsx":n(7026),"./utils.ts":n(5594),"./index.module.less":n(64211),"./type.ts":n(31294)},renderOpts:{compile:function(){var l=W()(R()().mark(function Y(){var H,p=arguments;return R()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,n.e(335).then(n.bind(n,37335));case 2:return c.abrupt("return",(H=c.sent).default.apply(H,p));case 3:case"end":return c.stop()}},Y)}));function _(){return l.apply(this,arguments)}return _}()}}}},7026:function(C,e,n){n.r(e),n.d(e,{DragPointDirection:function(){return E.DragPointDirection},DragSideDirection:function(){return E.DragSideDirection},default:function(){return Y}});var m=n(5574),R=n.n(m),r=n(67294),W="data:image/png;base64,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",o=n(64211),E=n(31294),t=n(5594),l=n(85893),_=function(p){var I=p.src,c=p.filename,K=c===void 0?"\u4E0B\u8F7D":c,u=p.onFinish,f=p.isShowDownload,N=f===void 0?!0:f,b=p.isShowReview,S=b===void 0?!0:b,L=p.areaColor,T=L===void 0?"#f00000":L,i=p.sideColor,s=i===void 0?"transparent":i,d=p.areaAlpha,q=d===void 0?.25:d,M=(0,r.useRef)(null),tt=(0,r.useRef)(null),k=(0,r.useRef)(null),z=(0,r.useRef)(null),nt=(0,r.useState)(""),Z=R()(nt,2),G=Z[0],V=Z[1],F=(0,r.useRef)(new Image),j=(0,r.useRef)({imageScale:1}),et=function(){V(W)},at=function(){var a=document.createElement("a");a.download=K+".jpg",a.href=G,a.click()},O=function(a,h,g,A){var w=k.current;if(w){var x=j.current.canvasCtx;if(x){var B=x.getImageData(a,h,g,A),y=document.createElement("canvas");if(y){var D=y.getContext("2d");y.width=B.width,y.height=B.height,D&&(D.putImageData(B,0,0),V(y.toDataURL()),u==null||u(y.toDataURL()))}}}},rt=function(a,h){if(a)for(var g=0,A=Array.from(a.children);g<A.length;g++){var w=A[g];(0,t.handleMoveDragElement)(w,a,h,function(){var x=h.getBoundingClientRect(),B=x.left,y=x.top,D=a.getBoundingClientRect(),X=D.left,Q=D.top;O(X-B,Q-y,a.clientWidth,a.clientHeight)})}},it=function(){return new Promise(function(a,h){var g=k.current,A=z.current;if(g&&A){var w=g.getContext("2d");if(w){j.current.canvasCtx=w;var x=new Image;x.src=I,x.crossOrigin="*";var B=A.getBoundingClientRect(),y=B.width,D=B.height,X=y/D;x.onload=function(){var Q=x.width,P=x.height,U=Q/P;Q<=y&&P<=D?j.current.imageScale=1:U>X?j.current.imageScale=y/Q:j.current.imageScale=D/P;var J=j.current.imageScale*Q,$=j.current.imageScale*P;g.width=J,g.height=$,w.drawImage(x,0,0,J,$),a(void 0)},x.onerror=function(Q){h(Q)}}}})},ot=function(a,h){var g=0,A=0;a.addEventListener("mousedown",function(w){w.stopPropagation();var x=w.pageX,B=w.pageY,y=a.offsetLeft,D=a.offsetTop;document.onmousemove=function(X){g=X.pageY-B+D,A=X.pageX-x+y;var Q=0,P=0,U=h.clientWidth-a.offsetWidth,J=h.clientHeight-a.offsetHeight;A=A<Q?Q:A>U?U:A,g=g<P?P:g>J?J:g,a.style.left=A+"px",a.style.top=g+"px"},document.onmouseup=function(){O(A,g,a.clientWidth,a.clientHeight),document.onmousemove=null}})};return(0,r.useEffect)(function(){if(M.current&&z.current&&k.current){var v=function(){var h=M.current;F.current.src=I,F.current.setAttribute("crossOrigin","Anonymous"),F.current.onload=function(){O(0,0,(h==null?void 0:h.clientWidth)||0,(h==null?void 0:h.clientHeight)||0)}};it().then(function(){v(),rt(M.current,k.current)}).catch(function(a){throw a}),ot(M.current,k.current)}},[]),(0,l.jsxs)("div",{className:o.default.container,children:[(0,l.jsx)("div",{className:o.default.tail_area,ref:z,children:(0,l.jsxs)("div",{className:o.default.image_container,ref:tt,children:[(0,l.jsx)("canvas",{ref:k}),(0,l.jsxs)("div",{className:o.default.drag_crop,ref:M,style:{background:(0,t.hexToRgba)(T,q)},children:[Object.keys(E.DragSideDirection).map(function(v){return(0,l.jsx)("div",{role:v,style:{background:s},className:"".concat(o.default.drag_crop_side," ").concat(o.default["drag_crop_side_"+v])},v)}),Object.keys(E.DragPointDirection).map(function(v){return(0,l.jsx)("div",{role:v,className:"".concat(o.default.drag_crop_point," ").concat(o.default["drag_crop_point_"+v])},v)})]})]})}),(S||N)&&(0,l.jsxs)("div",{className:o.default.tail_result,children:[S&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:o.default.tail_result_img,children:(0,l.jsx)("img",{src:G,alt:"",onError:et})}),(0,l.jsx)("span",{className:o.default.tail_result_text,children:"\u9884\u89C8"})]}),N&&(0,l.jsx)("span",{className:o.default.tail_result_link,onClick:at,children:"\u4E0B\u8F7D"})]})]})},Y=_},31294:function(C,e,n){n.r(e),n.d(e,{DragPointDirection:function(){return m},DragSideDirection:function(){return R}});var m=function(r){return r.tl="tl",r.tr="tr",r.bl="bl",r.br="br",r}({}),R=function(r){return r.top="top",r.bottom="bottom",r.left="left",r.right="right",r}({})},5594:function(C,e,n){n.r(e),n.d(e,{handleMoveDragElement:function(){return R},hexToRgba:function(){return W}});var m=n(31294),R=function(E,t,l,_){E.addEventListener("mousedown",function(Y){Y.stopPropagation();var H=Y.clientX,p=Y.clientY,I=parseInt(t.style.left)||0,c=parseInt(t.style.top)||0,K=t.getBoundingClientRect(),u=K.width,f=K.height,N=l.getBoundingClientRect(),b=N.top,S=N.left,L=N.width,T=N.height;document.onmousemove=function(i){var s=i.clientX-H,d=i.clientY-p;switch(E.role){case m.DragPointDirection.br:{i.clientX-S<L?t.style.width=u+s+"px":t.style.width=L-I+"px",i.clientY-b<T?t.style.height=f+d+"px":t.style.height=T-c+"px";break}case m.DragPointDirection.bl:{i.y-b<T?t.style.height=f+d+"px":t.style.height=T-c+"px",I+s>0?(I+s<i.x-S+u-s&&(t.style.left=I+s+"px"),u-s<l.width&&(t.style.width=u-s+"px")):(t.style.left="0px",t.style.width=i.x-S+u-s+"px");break}case m.DragPointDirection.tl:{i.clientX<=u+H&&(I+s>=0?(t.style.width=u-s+"px",t.style.left=I+s+"px"):(t.style.left="0px",t.style.width=i.x-S+u-s+"px")),i.clientY<=f+p&&(c+d>=0?(t.style.height=f-d+"px",t.style.top=c+d+"px"):(t.style.top="0px",t.style.height=i.y-b+f-d+"px"));break}case m.DragPointDirection.tr:{i.x-S<L?t.style.width=u+s+"px":t.style.width=L-I+"px",i.clientY<=f+p&&(c+d>=0?(t.style.height=f-d+"px",t.style.top=c+d+"px"):(t.style.top="0px",t.style.height=i.y-b+f-d+"px"));break}case m.DragSideDirection.top:{i.clientY<=f+p&&(c+d>=0?(t.style.height=f-d+"px",t.style.top=c+d+"px"):(t.style.top="0px",t.style.height=i.clientY-b+f-d+"px"));break}case m.DragSideDirection.bottom:{i.clientY<b+T?t.style.height=f+d+"px":t.style.height=T-c+"px";break}case m.DragSideDirection.right:{i.clientX<S+L?t.style.width=u+s+"px":t.style.width=L-I+"px";break}case m.DragSideDirection.left:{i.clientX<=u+H&&(I+s>=0?(t.style.width=u-s+"px",t.style.left=I+s+"px"):(t.style.left="0px",t.style.width=i.clientX-S+u-s+"px"));break}default:break}},E.addEventListener("mouseup",function(){document.onmousemove=null,_==null||_()})})};function r(o){var E=new Option().style;return E.color=o,E.color===o.toLowerCase()}function W(o){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=o;if(t.slice(0,1)!=="#")throw"The starting character must be #";if(t.length===3&&(t+="000"),r(t))throw"".concat(t," is not a hex color.");return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+E+")"}},64211:function(C,e,n){n.r(e),e.default={container:"I7PMjbK0NYSNpwu4ngUG",tail_area:"zDmKS7yolm8hZc9ktAI5",drag_crop:"mShkcjZApCcC2rYW2XPB",drag_crop_side:"S3jJJrKXRNEZRuf4eBAl",drag_crop_side_top:"_luRcGxnbpwyFqNAxA5c",drag_crop_side_bottom:"IDuUIRAEXa8VYJQxCN37",drag_crop_side_left:"cxd3z3eL3e0hh3AdA3u9",drag_crop_side_right:"AIohy8ws9_QlcDHHBfKu",drag_crop_point:"KfN_9fdz8mJj244fXw3U",drag_crop_point_tl:"Q1BQzqliCDYH5E81F_DZ",drag_crop_point_tr:"C7MJjABdkIYI9BSYSRxD",drag_crop_point_bl:"bfBBzr3AvHodbhkXxkkx",drag_crop_point_br:"_5U1I16wGQQrqA2xw0QT",image_container:"iAtzgdDgvwQhz_f6BPaS",tail_result:"sgJZqI5ZtZQSAfDx4t70",tail_result_img:"BDqfl7ZTkE036YBm8LJT",tail_result_text:"e4GteOI2T2Aq5fQfgWMw",tail_result_link:"q63LAKEg5nkO9Y0ay3sZ"}},18541:function(C,e,n){n.r(e),n.d(e,{texts:function(){return R}});var m=n(50361);const R=[{value:`import { Tailor } from "muddyrain"

export default function (){
  return (<Tailor src={'xxx.jpg'}></Tailor>)
}
`,paraId:0,tocIndex:1},{value:"\u53C2\u6570",paraId:1,tocIndex:2},{value:"\u8BF4\u660E",paraId:1,tocIndex:2},{value:"\u7C7B\u578B",paraId:1,tocIndex:2},{value:"\u63CF\u8FF0\u4FE1\u606F",paraId:1,tocIndex:2},{value:"\u9ED8\u8BA4\u503C",paraId:1,tocIndex:2},{value:"src",paraId:1,tocIndex:2},{value:"\u8981\u88C1\u526A\u7684\u56FE\u7247\u8DEF\u5F84",paraId:1,tocIndex:2},{value:"string",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"filename",paraId:1,tocIndex:2},{value:"\u6587\u4EF6\u540D\u79F0",paraId:1,tocIndex:2},{value:"string",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"\u6587\u4EF6",paraId:1,tocIndex:2},{value:"onFinish",paraId:1,tocIndex:2},{value:"\u8FD4\u56DE\u7684\u88C1\u526A\u540E\u7684\u56FE\u7247",paraId:1,tocIndex:2},{value:"(image: string) => void",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"\u65E0",paraId:1,tocIndex:2},{value:"isShowReview",paraId:1,tocIndex:2},{value:"\u662F\u5426\u663E\u793A\u9884\u89C8",paraId:1,tocIndex:2},{value:"boolean",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"true",paraId:1,tocIndex:2},{value:"isShowDownload",paraId:1,tocIndex:2},{value:"\u662F\u5426\u663E\u793A\u4E0B\u8F7D",paraId:1,tocIndex:2},{value:"boolean",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"true",paraId:1,tocIndex:2},{value:"sideColor",paraId:1,tocIndex:2},{value:"\u7F29\u653E\u8FB9\u754C\u8FB9\u7F18\u7684\u989C\u8272",paraId:1,tocIndex:2},{value:"string",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"transparent",paraId:1,tocIndex:2},{value:"areaColor",paraId:1,tocIndex:2},{value:"\u7F29\u653E\u533A\u57DF\u7684\u989C\u8272",paraId:1,tocIndex:2},{value:"string",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"#f00000",paraId:1,tocIndex:2},{value:"areaAlpha",paraId:1,tocIndex:2},{value:"\u7F29\u653E\u533A\u57DF\u7684\u900F\u660E\u5EA6",paraId:1,tocIndex:2},{value:"number",paraId:1,tocIndex:2},{value:"-",paraId:1,tocIndex:2},{value:"0.1",paraId:1,tocIndex:2}]},47313:function(C,e){e.Z=`import { ColorPicker, Space, Switch } from 'antd';
import React, { FC } from 'react';
import Tailor from '..';
const image1 =
	'https://muddyrain-oss.oss-cn-hangzhou.aliyuncs.com/package_assets/1.png';
const image2 =
	'https://muddyrain-oss.oss-cn-hangzhou.aliyuncs.com/package_assets/2.png';
const image3 =
	'https://muddyrain-oss.oss-cn-hangzhou.aliyuncs.com/package_assets/3.png';

const Demo1: FC = () => {
	const [isShowDownload, setIsShowDownload] = React.useState(true);
	const [isShowReview, setIsShowReview] = React.useState(true);
	const [areaColor, setAreaColor] = React.useState('#f00000');
	const [areaAlpha, setAreaAlpha] = React.useState(0.25);

	return (
		<div className="flex">
			<h2>\u5C0F\u4E8E\u5BB9\u5668\u5C3A\u5BF8</h2>
			<Space>
				<div>
					<Switch
						checked={isShowReview}
						onChange={() => setIsShowReview(!isShowReview)}
					/>
					<span>\u662F\u5426\u663E\u793A\u9884\u89C8</span>
				</div>
				<div>
					<Switch
						checked={isShowDownload}
						onChange={() => setIsShowDownload(!isShowDownload)}
					/>
					<span>\u662F\u5426\u663E\u793A\u4E0B\u8F7D</span>
				</div>
				<Space>
					<ColorPicker
						value={areaColor}
						onChange={(e: any) => {
							setAreaColor('#' + e.toHex());
							setAreaAlpha(e.metaColor.roundA);
						}}
					/>
					<span>\u533A\u57DF\u989C\u8272</span>
				</Space>
			</Space>

			<Tailor
				isShowDownload={isShowDownload}
				isShowReview={isShowReview}
				areaColor={areaColor}
				areaAlpha={areaAlpha}
				src={image1}
			></Tailor>
			<h2>\u5927\u4E8E\u5BBD\u5EA6\u5BB9\u5668\u5C3A\u5BF8</h2>
			<Tailor src={image2}></Tailor>
			<h2>\u5927\u4E8E\u9AD8\u5EA6\u5BB9\u5668\u5C3A\u5BF8</h2>
			<Tailor src={image3}></Tailor>
		</div>
	);
};

export default Demo1;
`},31255:function(C,e){e.Z=`.container {
  .tail_area {
    .drag_crop {

      .drag_crop_side {
        position: absolute;
      }

      .drag_crop_side_top,
      .drag_crop_side_bottom {
        cursor: ns-resize;
        width: 100%;
        height: 4px;
      }

      .drag_crop_side_left,
      .drag_crop_side_right {
        cursor: ew-resize;
        width: 4px;
        height: 100%;
      }

      .drag_crop_side_top {
        top: 0;
        left: 0;
      }

      .drag_crop_side_bottom {
        bottom: 0;
        left: 0;
      }

      .drag_crop_side_left {
        left: 0;
        bottom: 0;
      }

      .drag_crop_side_right {
        right: 0;
        bottom: 0;
      }


      .drag_crop_point {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: #999999;
        border: 1px solid #ffffff;

      }

      .drag_crop_point_tl {
        cursor: nwse-resize;
        left: 0;
        top: 0;
        transform: translateX(-50%) translateY(-50%);
      }

      .drag_crop_point_tr {
        cursor: nesw-resize;
        right: 0;
        top: 0;
        transform: translateX(50%) translateY(-50%);
      }

      .drag_crop_point_bl {
        cursor: nesw-resize;
        left: 0;
        bottom: 0;
        transform: translateX(-50%) translateY(50%);
      }

      .drag_crop_point_br {
        cursor: nwse-resize;
        right: 0;
        bottom: 0;
        transform: translateX(50%) translateY(50%);
      }

      width: 150px;
      height: 150px;
      position: absolute;
      cursor: move;
      left: 0;
      top: 0;
    }

    .image_container {
      position: relative;
    }

    background: url("./images/mosaic.jpg");
    height: 500px;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    flex: 1;
  }

  .tail_result {
    .tail_result_img {

      img {
        &:hover {
          pointer-events: none;
        }

        height: 100%;
        max-width: 100%;
        object-fit: contain;
        user-select: none;
      }

      background: url("./images/mosaic.jpg");
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      width: 100px;
    }

    .tail_result_text {
      text-align: center;
      margin-top: 10px;
      color: #666666;
      user-select: none;
    }

    .tail_result_link {
      text-align: center;
      margin-top: 10px;
      color: #1677d2;
      cursor: pointer;
    }

    display: flex;
    flex-direction: column;
    padding: 0 15px;
  }

  display: flex;
}`},17464:function(C,e){e.Z=`import React, { FC, useEffect, useRef, useState } from 'react';
import ErrorImage from './images/error.png';
import styles from './index.module.less';
import {
	DragPointDirection,
	DragSideDirection,
	type TailorProps,
} from './type.d';
import { handleMoveDragElement, hexToRgba } from './utils';
/**
 * \u88C1\u526A
 */
const Tailor: FC<TailorProps> = ({
	src,
	filename = '\u4E0B\u8F7D',
	onFinish,
	isShowDownload = true,
	isShowReview = true,
	areaColor = '#f00000',
	sideColor = 'transparent',
	areaAlpha = 0.25,
}) => {
	const dragRef = useRef<HTMLDivElement>(null);
	const imageContainerRef = useRef<HTMLDivElement>(null);
	const canvasRef = useRef<HTMLCanvasElement>(null);
	const wrapRef = useRef<HTMLDivElement>(null);
	const [base64URL, setBase64URL] = useState('');
	const imgObject = useRef(new Image());

	const state = useRef<{
		imageScale: number;
		canvasCtx?: CanvasRenderingContext2D;
	}>({
		imageScale: 1,
	});

	/**
	 * \u5904\u7406 image \u56FE\u7247\u62A5\u9519
	 */

	const handleImageError = function () {
		setBase64URL(ErrorImage);
	};

	/**
	 * \u5904\u7406\u4E0B\u8F7D\u56FE\u7247
	 */
	const handleDownload = () => {
		const a = document.createElement('a');
		// \u8BBE\u7F6E\u56FE\u7247\u540D\u79F0
		a.download = filename + '.jpg';
		a.href = base64URL;
		a.click();
	};

	/**
	 * \u88C1\u526A\u56FE\u7247
	 */
	const clipImage = (
		left: number,
		top: number,
		dragWidth: number,
		dragHeight: number
	) => {
		const imageElement = canvasRef.current;
		if (!imageElement) return;
		const ctx = state.current.canvasCtx;
		if (ctx) {
			const imagedata = ctx.getImageData(left, top, dragWidth, dragHeight);
			let _canvas = document.createElement('canvas');
			if (_canvas) {
				let _ctx = _canvas.getContext('2d');
				_canvas.width = imagedata.width;
				_canvas.height = imagedata.height;
				if (_ctx) {
					_ctx.putImageData(imagedata, 0, 0);
					setBase64URL(_canvas.toDataURL());
					onFinish?.(_canvas.toDataURL());
				}
			}
		}
	};
	const createDragEvent = (
		dragElement: HTMLDivElement,
		canvasElement: HTMLCanvasElement
	) => {
		if (!dragElement) return;
		for (const element of Array.from(
			dragElement.children
		) as HTMLDivElement[]) {
			handleMoveDragElement(element, dragElement, canvasElement, () => {
				const { left: canvasLeft, top: canvasTop } =
					canvasElement.getBoundingClientRect();
				const { left: dragLeft, top: dragTop } =
					dragElement.getBoundingClientRect();
				clipImage(
					dragLeft - canvasLeft,
					dragTop - canvasTop,
					dragElement.clientWidth,
					dragElement.clientHeight
				);
			});
		}
	};
	/**
	 * \u521D\u59CB\u5316canvas
	 */
	const initCanvas = (): Promise<undefined> => {
		return new Promise((resolve, reject) => {
			const canvasElement = canvasRef.current;
			const wrapElement = wrapRef.current;
			if (canvasElement && wrapElement) {
				const ctx = canvasElement.getContext('2d');
				if (ctx) {
					state.current.canvasCtx = ctx;
					const image = new Image();
					image.src = src;
					image.crossOrigin = '*';
					const { width: wrapWidth, height: wrapHeight } =
						wrapElement.getBoundingClientRect();
					const wrapProportion = wrapWidth / wrapHeight;

					image.onload = () => {
						const { width: imageWidth, height: imageHeight } = image;
						const imageProportion = imageWidth / imageHeight;

						// \u5982\u679C\u56FE\u7247\u5C3A\u5BF8\u5C0F\u4E8E\u5BB9\u5668\u5C3A\u5BF8
						if (imageWidth <= wrapWidth && imageHeight <= wrapHeight) {
							state.current.imageScale = 1;
						} else if (imageProportion > wrapProportion) {
							state.current.imageScale = wrapWidth / imageWidth;
						} else {
							state.current.imageScale = wrapHeight / imageHeight;
						}
						const scaleImgWidth = state.current.imageScale * imageWidth;
						const scaleImgHeight = state.current.imageScale * imageHeight;
						canvasElement.width = scaleImgWidth;
						canvasElement.height = scaleImgHeight;
						ctx.drawImage(image, 0, 0, scaleImgWidth, scaleImgHeight);
						resolve(undefined);
					};
					image.onerror = (error) => {
						reject(error);
					};
				}
			}
		});
	};

	const handleDrag = (
		dragElement: HTMLDivElement,
		canvasElement: HTMLCanvasElement
	) => {
		let curT = 0;
		let curL = 0;
		dragElement.addEventListener('mousedown', (e) => {
			e.stopPropagation();
			// \u8BB0\u5F55\u70B9\u51FB\u8DDD\u79BB\u9875\u9762\u5750\u6807
			const pageX = e.pageX;
			const pageY = e.pageY;
			// \u8BB0\u5F55\u5DE6\u8FB9\u548C\u4E0A\u8FB9\u7684\u8DDD\u79BB
			const left = dragElement.offsetLeft;
			const top = dragElement.offsetTop;
			document.onmousemove = (ev) => {
				curT = ev.pageY - pageY + top;
				curL = ev.pageX - pageX + left;
				// \u8FB9\u754C\u5904\u7406
				const minL = 0;
				const minT = 0;
				const maxL = canvasElement.clientWidth - dragElement.offsetWidth;
				const maxT = canvasElement.clientHeight - dragElement.offsetHeight;
				curL = curL < minL ? minL : curL > maxL ? maxL : curL;
				curT = curT < minT ? minT : curT > maxT ? maxT : curT;
				dragElement.style.left = curL + 'px';
				dragElement.style.top = curT + 'px';
			};
			document.onmouseup = () => {
				clipImage(
					curL,
					curT,
					dragElement.clientWidth,
					dragElement.clientHeight
				);
				document.onmousemove = null;
			};
		});
	};
	useEffect(() => {
		if (!dragRef.current) return;
		if (!wrapRef.current) return;
		if (!canvasRef.current) return;
		const initImage = () => {
			const dragElement = dragRef.current;
			imgObject.current.src = src;
			imgObject.current.setAttribute('crossOrigin', 'Anonymous');
			imgObject.current.onload = () => {
				clipImage(
					0,
					0,
					dragElement?.clientWidth || 0,
					dragElement?.clientHeight || 0
				);
			};
		};
		initCanvas()
			.then(() => {
				// \u521D\u59CB\u5316\u56FE\u7247\u5BF9\u8C61
				initImage();
				// \u6CE8\u518Cdrag\u5143\u7D20\u4E8B\u4EF6
				createDragEvent(dragRef.current!, canvasRef.current!);
			})
			.catch((err) => {
				throw err;
			});

		handleDrag(dragRef.current, canvasRef.current);
	}, []);
	return (
		<div className={styles['container']}>
			<div className={styles['tail_area']} ref={wrapRef}>
				<div className={styles['image_container']} ref={imageContainerRef}>
					<canvas ref={canvasRef} />
					<div
						className={styles['drag_crop']}
						ref={dragRef}
						style={{ background: hexToRgba(areaColor, areaAlpha) }}
					>
						{Object.keys(DragSideDirection).map((key) => (
							<div
								key={key}
								role={key}
								style={{ background: sideColor }}
								className={\`\${styles['drag_crop_side']} \${
									styles['drag_crop_side_' + key]
								}\`}
							/>
						))}
						{Object.keys(DragPointDirection).map((key) => (
							<div
								key={key}
								role={key}
								className={\`\${styles['drag_crop_point']} \${
									styles['drag_crop_point_' + key]
								}\`}
							/>
						))}
					</div>
				</div>
			</div>
			{(isShowReview || isShowDownload) && (
				<div className={styles['tail_result']}>
					{isShowReview && (
						<>
							<div className={styles['tail_result_img']}>
								<img src={base64URL} alt="" onError={handleImageError} />
							</div>
							<span className={styles['tail_result_text']}>\u9884\u89C8</span>
						</>
					)}
					{isShowDownload && (
						<span
							className={styles['tail_result_link']}
							onClick={handleDownload}
						>
							\u4E0B\u8F7D
						</span>
					)}
				</div>
			)}
		</div>
	);
};

export default Tailor;
export * from './type.d';
`},76351:function(C,e){e.Z=`export interface TailorProps {
	/**
	 * \u8981\u88C1\u526A\u7684\u56FE\u7247\u8DEF\u5F84
	 */
	src: string;
	/**
	 * \u6587\u4EF6\u540D\u79F0
	 * default : \u6587\u4EF6
	 */
	filename?: string;
	/**
	 * @param {string} image \u8FD4\u56DE\u7684\u88C1\u526A\u540E\u7684\u56FE\u7247
	 * @return {void} \u65E0
	 */
	onFinish?: (image: string) => void;
	/**
	 * \u662F\u5426\u663E\u793A\u9884\u89C8
	 * default : true
	 */
	isShowReview?: boolean;
	/**
	 * \u662F\u5426\u663E\u793A\u4E0B\u8F7D
	 * default : true
	 */
	isShowDownload?: boolean;
	/**
	 * \u7F29\u653E\u8FB9\u754C\u8FB9\u7F18\u7684\u989C\u8272
	 * default : transparent
	 */
	sideColor?: string;
	/**
	 * \u7F29\u653E\u533A\u57DF\u7684\u989C\u8272
	 * default : #f00000
	 */
	areaColor?: string;
	/**
	 * \u7F29\u653E\u533A\u57DF\u7684\u900F\u660E\u5EA6
	 * default : 0.1
	 */
	areaAlpha?: number;
}

export enum DragPointDirection {
	tl = 'tl',
	tr = 'tr',
	bl = 'bl',
	br = 'br',
}
export enum DragSideDirection {
	top = 'top',
	bottom = 'bottom',
	left = 'left',
	right = 'right',
}
`},64859:function(C,e){e.Z=`import { DragPointDirection, DragSideDirection } from '../type.d';

export const handleMoveDragElement = (
	element: HTMLDivElement,
	dragElement: HTMLDivElement,
	canvasElement: HTMLCanvasElement,
	onMouseUp?: () => void
) => {
	element.addEventListener('mousedown', (e) => {
		e.stopPropagation();
		// \u8BB0\u5F55\u9F20\u6807\u7684\u8D77\u59CB\u4F4D\u7F6E
		const startX = e.clientX;
		const startY = e.clientY;
		const startLeft = parseInt(dragElement.style.left) || 0;
		const startTop = parseInt(dragElement.style.top) || 0;
		const { width: startWidth, height: startHeight } =
			dragElement.getBoundingClientRect();
		const {
			top: canvasTop,
			left: canvasLeft,
			width: canvasWidth,
			height: canvasHeight,
		} = canvasElement.getBoundingClientRect();
		document.onmousemove = (e) => {
			let distanceX = e.clientX - startX;
			let distanceY = e.clientY - startY;

			switch (element.role as DragSideDirection & DragPointDirection) {
				// \u53F3\u4E0B\u89D2
				case DragPointDirection.br: {
					// \u8D77\u59CBx\u8F74\u4F4D\u7F6E - \u56FE\u5F62\u8DDD\u79BB\u89C6\u53E3\u7684left\u503C \u5C0F\u4E8E \u56FE\u5F62\u7684\u5BBD\u5EA6
					if (e.clientX - canvasLeft < canvasWidth) {
						dragElement.style.width = startWidth + distanceX + 'px';
					} else {
						dragElement.style.width = canvasWidth - startLeft + 'px';
					}
					// \u8D77\u59CBy\u8F74\u4F4D\u7F6E - \u56FE\u5F62\u8DDD\u79BB\u89C6\u53E3\u7684top\u503C \u5C0F\u4E8E \u56FE\u5F62\u7684\u9AD8\u5EA6
					if (e.clientY - canvasTop < canvasHeight) {
						dragElement.style.height = startHeight + distanceY + 'px';
					} else {
						dragElement.style.height = canvasHeight - startTop + 'px';
					}
					break;
				}
				// \u5DE6\u4E0B\u89D2
				case DragPointDirection.bl: {
					if (e.y - canvasTop < canvasHeight) {
						dragElement.style.height = startHeight + distanceY + 'px';
					} else {
						dragElement.style.height = canvasHeight - startTop + 'px';
					}
					// \u8BB0\u5F55\u9F20\u6807\u7684\u8D77\u59CB\u4F4D\u7F6E \u548C \u79FB\u52A8\u7684\u4F4D\u7F6E \u5927\u4E8E 0
					if (startLeft + distanceX > 0) {
						// \u8BB0\u5F55\u9F20\u6807\u7684\u8D77\u59CB\u4F4D\u7F6E \u548C \u79FB\u52A8\u7684\u4F4D\u7F6E  \u5C0F\u4E8E \u5F53\u524D\u9009\u4E2D\u533A\u6700\u53F3\u4FA7\u7684\u4F4D\u7F6E
						if (
							startLeft + distanceX <
							e.x - canvasLeft + startWidth - distanceX
						) {
							dragElement.style.left = startLeft + distanceX + 'px';
						}
						if (startWidth - distanceX < canvasElement.width) {
							dragElement.style.width = startWidth - distanceX + 'px';
						}
					} else {
						dragElement.style.left = 0 + 'px';
						dragElement.style.width =
							e.x - canvasLeft + startWidth - distanceX + 'px';
					}
					break;
				}
				// \u5DE6\u4E0A\u89D2
				case DragPointDirection.tl: {
					if (e.clientX <= startWidth + startX) {
						if (startLeft + distanceX >= 0) {
							dragElement.style.width = startWidth - distanceX + 'px';
							dragElement.style.left = startLeft + distanceX + 'px';
						} else {
							dragElement.style.left = 0 + 'px';
							dragElement.style.width =
								e.x - canvasLeft + startWidth - distanceX + 'px';
						}
					}
					if (e.clientY <= startHeight + startY) {
						if (startTop + distanceY >= 0) {
							dragElement.style.height = startHeight - distanceY + 'px';
							dragElement.style.top = startTop + distanceY + 'px';
						} else {
							dragElement.style.top = 0 + 'px';
							dragElement.style.height =
								e.y - canvasTop + startHeight - distanceY + 'px';
						}
					}
					break;
				}
				case DragPointDirection.tr: {
					// \u8D77\u59CBx\u8F74\u4F4D\u7F6E - \u56FE\u5F62\u8DDD\u79BB\u89C6\u53E3\u7684left\u503C \u5C0F\u4E8E \u56FE\u5F62\u7684\u5BBD\u5EA6
					if (e.x - canvasLeft < canvasWidth) {
						dragElement.style.width = startWidth + distanceX + 'px';
					} else {
						dragElement.style.width = canvasWidth - startLeft + 'px';
					}
					if (e.clientY <= startHeight + startY) {
						if (startTop + distanceY >= 0) {
							dragElement.style.height = startHeight - distanceY + 'px';
							dragElement.style.top = startTop + distanceY + 'px';
						} else {
							dragElement.style.top = 0 + 'px';
							dragElement.style.height =
								e.y - canvasTop + startHeight - distanceY + 'px';
						}
					}
					break;
				}
				case DragSideDirection.top: {
					if (e.clientY <= startHeight + startY) {
						if (startTop + distanceY >= 0) {
							dragElement.style.height = startHeight - distanceY + 'px';
							dragElement.style.top = startTop + distanceY + 'px';
						} else {
							dragElement.style.top = 0 + 'px';
							dragElement.style.height =
								e.clientY - canvasTop + startHeight - distanceY + 'px';
						}
					}
					break;
				}
				case DragSideDirection.bottom: {
					if (e.clientY < canvasTop + canvasHeight) {
						dragElement.style.height = startHeight + distanceY + 'px';
					} else {
						dragElement.style.height = canvasHeight - startTop + 'px';
					}
					break;
				}
				case DragSideDirection.right: {
					if (e.clientX < canvasLeft + canvasWidth) {
						dragElement.style.width = startWidth + distanceX + 'px';
					} else {
						dragElement.style.width = canvasWidth - startLeft + 'px';
					}
					break;
				}
				case DragSideDirection.left: {
					if (e.clientX <= startWidth + startX) {
						if (startLeft + distanceX >= 0) {
							dragElement.style.width = startWidth - distanceX + 'px';
							dragElement.style.left = startLeft + distanceX + 'px';
						} else {
							dragElement.style.left = 0 + 'px';
							dragElement.style.width =
								e.clientX - canvasLeft + startWidth - distanceX + 'px';
						}
					}
					break;
				}
				default:
					break;
			}
		};
		element.addEventListener('mouseup', () => {
			document.onmousemove = null;
			onMouseUp?.();
		});
	});
};

/**
 * \u5224\u65AD\u662F\u5426\u4E3A\u989C\u8272
 * @param {string} strColor
 * @returns {boolean}
 */
function isValidColor(strColor: string) {
	let s = new Option().style;
	s.color = strColor;

	// return 'false' if color wasn't assigned
	return s.color === strColor.toLowerCase();
}

/**
 *
 * @param {string} hex  16\u8FDB\u5236\u989C\u8272
 * @param {number} opacity   \u900F\u660E\u5EA6
 * @returns rgba \u989C\u8272
 */
export function hexToRgba(_hex: string, opacity: number = 1) {
	let hex = _hex;
	if (hex.slice(0, 1) !== '#') {
		throw \`The starting character must be #\`;
	}
	if (hex.length === 3) {
		hex += '000';
	}
	if (isValidColor(hex)) {
		throw \`\${hex} is not a hex color.\`;
	}
	return (
		'rgba(' +
		parseInt('0x' + hex.slice(1, 3)) +
		',' +
		parseInt('0x' + hex.slice(3, 5)) +
		',' +
		parseInt('0x' + hex.slice(5, 7)) +
		',' +
		opacity +
		')'
	);
}
`}}]);
