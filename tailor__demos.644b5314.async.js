"use strict";(self.webpackChunkmuddyrain=self.webpackChunkmuddyrain||[]).push([[612],{89571:function(Qt,G,p){p.r(G),p.d(G,{default:function(){return ut}});var tt=p(5574),F=p.n(tt),O=p(42075),W=p(72269),et=p(34198),B=p(67294),at="data:image/png;base64,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",x={container:"I7PMjbK0NYSNpwu4ngUG",tail_area:"zDmKS7yolm8hZc9ktAI5",drag_crop:"mShkcjZApCcC2rYW2XPB",drag_crop_side:"S3jJJrKXRNEZRuf4eBAl",drag_crop_side_top:"_luRcGxnbpwyFqNAxA5c",drag_crop_side_bottom:"IDuUIRAEXa8VYJQxCN37",drag_crop_side_left:"cxd3z3eL3e0hh3AdA3u9",drag_crop_side_right:"AIohy8ws9_QlcDHHBfKu",drag_crop_point:"KfN_9fdz8mJj244fXw3U",drag_crop_point_tl:"Q1BQzqliCDYH5E81F_DZ",drag_crop_point_tr:"C7MJjABdkIYI9BSYSRxD",drag_crop_point_bl:"bfBBzr3AvHodbhkXxkkx",drag_crop_point_br:"_5U1I16wGQQrqA2xw0QT",image_container:"iAtzgdDgvwQhz_f6BPaS",tail_result:"sgJZqI5ZtZQSAfDx4t70",tail_result_img:"BDqfl7ZTkE036YBm8LJT",tail_result_text:"e4GteOI2T2Aq5fQfgWMw",tail_result_link:"q63LAKEg5nkO9Y0ay3sZ"},H=function(o){return o.tl="tl",o.tr="tr",o.bl="bl",o.br="br",o}({}),T=function(o){return o.top="top",o.bottom="bottom",o.left="left",o.right="right",o}({}),it=function(r,t,m,K){r.addEventListener("mousedown",function(J){J.stopPropagation();var b=J.clientX,I=J.clientY,h=parseInt(t.style.left)||0,v=parseInt(t.style.top)||0,k=t.getBoundingClientRect(),s=k.width,c=k.height,Y=m.getBoundingClientRect(),C=Y.top,y=Y.left,f=Y.width,S=Y.height;document.onmousemove=function(a){var n=a.clientX-b,l=a.clientY-I;switch(r.role){case H.br:{a.clientX-y<f?t.style.width=s+n+"px":t.style.width=f-h+"px",a.clientY-C<S?t.style.height=c+l+"px":t.style.height=S-v+"px";break}case H.bl:{a.y-C<S?t.style.height=c+l+"px":t.style.height=S-v+"px",h+n>0?(h+n<a.x-y+s-n&&(t.style.left=h+n+"px"),s-n<m.width&&(t.style.width=s-n+"px")):(t.style.left="0px",t.style.width=a.x-y+s-n+"px");break}case H.tl:{a.clientX<=s+b&&(h+n>=0?(t.style.width=s-n+"px",t.style.left=h+n+"px"):(t.style.left="0px",t.style.width=a.x-y+s-n+"px")),a.clientY<=c+I&&(v+l>=0?(t.style.height=c-l+"px",t.style.top=v+l+"px"):(t.style.top="0px",t.style.height=a.y-C+c-l+"px"));break}case H.tr:{a.x-y<f?t.style.width=s+n+"px":t.style.width=f-h+"px",a.clientY<=c+I&&(v+l>=0?(t.style.height=c-l+"px",t.style.top=v+l+"px"):(t.style.top="0px",t.style.height=a.y-C+c-l+"px"));break}case T.top:{a.clientY<=c+I&&(v+l>=0?(t.style.height=c-l+"px",t.style.top=v+l+"px"):(t.style.top="0px",t.style.height=a.clientY-C+c-l+"px"));break}case T.bottom:{a.clientY<C+S?t.style.height=c+l+"px":t.style.height=S-v+"px";break}case T.right:{a.clientX<y+f?t.style.width=s+n+"px":t.style.width=f-h+"px";break}case T.left:{a.clientX<=s+b&&(h+n>=0?(t.style.width=s-n+"px",t.style.left=h+n+"px"):(t.style.left="0px",t.style.width=a.clientX-y+s-n+"px"));break}default:break}},r.addEventListener("mouseup",function(){document.onmousemove=null,K==null||K()})})};function nt(o){var r=new Option().style;return r.color=o,r.color===o.toLowerCase()}function ot(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=o;if(t.slice(0,1)!=="#")throw"The starting character must be #";if(t.length===3&&(t+="000"),nt(t))throw"".concat(t," is not a hex color.");return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+r+")"}var e=p(85893),rt=function(r){var t=r.src,m=r.filename,K=m===void 0?"\u4E0B\u8F7D":m,J=r.onFinish,b=r.isShowDownload,I=b===void 0?!0:b,h=r.isShowReview,v=h===void 0?!0:h,k=r.areaColor,s=k===void 0?"#f00000":k,c=r.sideColor,Y=c===void 0?"transparent":c,C=r.areaAlpha,y=C===void 0?.25:C,f=(0,B.useRef)(null),S=(0,B.useRef)(null),a=(0,B.useRef)(null),n=(0,B.useRef)(null),l=(0,B.useState)(""),q=F()(l,2),_=q[0],V=q[1],M=(0,B.useRef)(new Image),D=(0,B.useRef)({imageScale:1}),ht=function(){V(at)},gt=function(){var i=document.createElement("a");i.download=K+".jpg",i.href=_,i.click()},P=function(i,u,A,d){var w=a.current;if(w){var Q=D.current.canvasCtx;if(Q){var N=Q.getImageData(i,u,A,d),E=document.createElement("canvas");if(E){var R=E.getContext("2d");E.width=N.width,E.height=N.height,R&&(R.putImageData(N,0,0),V(E.toDataURL()),J==null||J(E.toDataURL()))}}}},dt=function(i,u){for(var A=0,d=Array.from(i.children);A<d.length;A++){var w=d[A];it(w,i,u,function(){var Q=u.getBoundingClientRect(),N=Q.left,E=Q.top,R=i.getBoundingClientRect(),U=R.left,j=R.top;P(U-N,j-E,i.clientWidth,i.clientHeight)})}},vt=function(){return new Promise(function(i,u){var A=a.current,d=n.current;if(A&&d){var w=A.getContext("2d");if(w){D.current.canvasCtx=w;var Q=new Image;Q.src=t;var N=d.getBoundingClientRect(),E=N.width,R=N.height,U=E/R;Q.onload=function(){var j=Q.width,L=Q.height,z=j/L;j<=E&&L<=R?D.current.imageScale=1:z>U?D.current.imageScale=E/j:D.current.imageScale=R/L;var Z=D.current.imageScale*j,$=D.current.imageScale*L;A.width=Z,A.height=$,w.drawImage(Q,0,0,Z,$),i(void 0)},Q.onerror=function(j){u(j)}}}})},ft=function(i,u){var A=0,d=0;i.addEventListener("mousedown",function(w){w.stopPropagation();var Q=w.pageX,N=w.pageY,E=i.offsetLeft,R=i.offsetTop;document.onmousemove=function(U){A=U.pageY-N+R,d=U.pageX-Q+E;var j=0,L=0,z=u.clientWidth-i.offsetWidth,Z=u.clientHeight-i.offsetHeight;d=d<j?j:d>z?z:d,A=A<L?L:A>Z?Z:A,i.style.left=d+"px",i.style.top=A+"px"},document.onmouseup=function(){P(d,A,i.clientWidth,i.clientHeight),document.onmousemove=null}})};return(0,B.useEffect)(function(){if(f.current&&n.current&&a.current){var g=function(){var u=f.current;M.current.src=t,M.current.setAttribute("crossOrigin","Anonymous"),M.current.onload=function(){P(0,0,(u==null?void 0:u.clientWidth)||0,(u==null?void 0:u.clientHeight)||0)}};vt().then(function(){g(),dt(f.current,a.current)}).catch(function(i){throw i}),ft(f.current,a.current)}},[]),(0,e.jsxs)("div",{className:x.container,children:[(0,e.jsx)("div",{className:x.tail_area,ref:n,children:(0,e.jsxs)("div",{className:x.image_container,ref:S,children:[(0,e.jsx)("canvas",{ref:a}),(0,e.jsxs)("div",{className:x.drag_crop,ref:f,style:{background:ot(s,y)},children:[Object.keys(T).map(function(g){return(0,e.jsx)("div",{role:g,style:{background:Y},className:"".concat(x.drag_crop_side," ").concat(x["drag_crop_side_"+g])},g)}),Object.keys(H).map(function(g){return(0,e.jsx)("div",{role:g,className:"".concat(x.drag_crop_point," ").concat(x["drag_crop_point_"+g])},g)})]})]})}),(v||I)&&(0,e.jsxs)("div",{className:x.tail_result,children:[v&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:x.tail_result_img,children:(0,e.jsx)("img",{src:_,alt:"",onError:ht})}),(0,e.jsx)("span",{className:x.tail_result_text,children:"\u9884\u89C8"})]}),I&&(0,e.jsx)("span",{className:x.tail_result_link,onClick:gt,children:"\u4E0B\u8F7D"})]})]})},X=rt,st=p.p+"static/1.01ea1468.png",At=p.p+"static/2.90932fd8.png",ct=p.p+"static/3.a0c19940.png",lt=function(){var r=B.useState(!0),t=F()(r,2),m=t[0],K=t[1],J=B.useState(!0),b=F()(J,2),I=b[0],h=b[1],v=B.useState("#f00000"),k=F()(v,2),s=k[0],c=k[1],Y=B.useState(.25),C=F()(Y,2),y=C[0],f=C[1];return(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("h2",{children:"\u5C0F\u4E8E\u5BB9\u5668\u5C3A\u5BF8"}),(0,e.jsxs)(O.Z,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(W.Z,{checked:I,onChange:function(){return h(!I)}}),(0,e.jsx)("span",{children:"\u662F\u5426\u663E\u793A\u9884\u89C8"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(W.Z,{checked:m,onChange:function(){return K(!m)}}),(0,e.jsx)("span",{children:"\u662F\u5426\u663E\u793A\u4E0B\u8F7D"})]}),(0,e.jsxs)(O.Z,{children:[(0,e.jsx)(et.Z,{value:s,onChange:function(a){c("#"+a.toHex()),f(a.metaColor.roundA)}}),(0,e.jsx)("span",{children:"\u533A\u57DF\u989C\u8272"})]})]}),(0,e.jsx)(X,{isShowDownload:m,isShowReview:I,areaColor:s,areaAlpha:y,src:st}),(0,e.jsx)("h2",{children:"\u5927\u4E8E\u5BBD\u5EA6\u5BB9\u5668\u5C3A\u5BF8"}),(0,e.jsx)(X,{src:At}),(0,e.jsx)("h2",{children:"\u5927\u4E8E\u9AD8\u5EA6\u5BB9\u5668\u5C3A\u5BF8"}),(0,e.jsx)(X,{src:ct})]})},ut=lt}}]);
